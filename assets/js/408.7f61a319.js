(window.webpackJsonp=window.webpackJsonp||[]).push([[408],{740:function(n,t,e){"use strict";e.r(t);var o=e(4),i=Object(o.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"结构型-组合-composite"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结构型-组合-composite"}},[n._v("#")]),n._v(" 结构型 - 组合(Composite)")]),n._v(" "),t("blockquote",[t("p",[n._v('组合模式(composite pattern): 允许你将对象组合成树形结构来表现"整体/部分"层次结构.\n组合能让客户以一致的方式处理个别对象以及对象组合。')])]),n._v(" "),t("h2",{attrs:{id:"意图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#意图"}},[n._v("#")]),n._v(" 意图")]),n._v(" "),t("p",[n._v("将对象组合成树形结构来表示“整体/部分”层次关系，允许用户以相同的方式处理单独对象和组合对象。")]),n._v(" "),t("h2",{attrs:{id:"类图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#类图"}},[n._v("#")]),n._v(" 类图")]),n._v(" "),t("p",[n._v("组件(Component)类是组合类(Composite)和叶子类(Leaf)的父类，可以把组合类看成是树的中间节点。")]),n._v(" "),t("p",[n._v("组合对象拥有一个或者多个组件对象，因此组合对象的操作可以委托给组件对象去处理，而组件对象可以是另一个组合对象或者叶子对象。")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/willpast/image/blog/ka_java/3fb5b255-b791-45b6-8754-325c8741855a.png",alt:"img"}})]),n._v(" "),t("h2",{attrs:{id:"实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实现"}},[n._v("#")]),n._v(" 实现")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[n._v('public abstract class Component {\n    protected String name;\n\n    public Component(String name) {\n        this.name = name;\n    }\n\n    public void print() {\n        print(0);\n    }\n\n    abstract void print(int level);\n\n    abstract public void add(Component component);\n\n    abstract public void remove(Component component);\n}\n\n\n\npublic class Composite extends Component {\n\n    private List<Component> child;\n\n    public Composite(String name) {\n        super(name);\n        child = new ArrayList<>();\n    }\n\n    @Override\n    void print(int level) {\n        for (int i = 0; i < level; i++) {\n            System.out.print("--");\n        }\n        System.out.println("Composite:" + name);\n        for (Component component : child) {\n            component.print(level + 1);\n        }\n    }\n\n    @Override\n    public void add(Component component) {\n        child.add(component);\n    }\n\n    @Override\n    public void remove(Component component) {\n        child.remove(component);\n    }\n}\n\n\n\npublic class Leaf extends Component {\n    public Leaf(String name) {\n        super(name);\n    }\n\n    @Override\n    void print(int level) {\n        for (int i = 0; i < level; i++) {\n            System.out.print("--");\n        }\n        System.out.println("left:" + name);\n    }\n\n    @Override\n    public void add(Component component) {\n        throw new UnsupportedOperationException(); // 牺牲透明性换取单一职责原则，这样就不用考虑是叶子节点还是组合节点\n    }\n\n    @Override\n    public void remove(Component component) {\n        throw new UnsupportedOperationException();\n    }\n}\n\n\n\npublic class Client {\n    public static void main(String[] args) {\n        Composite root = new Composite("root");\n        Component node1 = new Leaf("1");\n        Component node2 = new Composite("2");\n        Component node3 = new Leaf("3");\n        root.add(node1);\n        root.add(node2);\n        root.add(node3);\n        Component node21 = new Leaf("21");\n        Component node22 = new Composite("22");\n        node2.add(node21);\n        node2.add(node22);\n        Component node221 = new Leaf("221");\n        node22.add(node221);\n        root.print();\n    }\n}\n\n\n\nComposite:root\n--left:1\n--Composite:2\n----left:21\n----Composite:22\n------left:221\n--left:3\n')])])]),t("h2",{attrs:{id:"jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk"}},[n._v("#")]),n._v(" JDK")]),n._v(" "),t("ul",[t("li",[n._v("javax.swing.JComponent#add(Component)")]),n._v(" "),t("li",[n._v("java.awt.Container#add(Component)")]),n._v(" "),t("li",[n._v("java.util.Map#putAll(Map)")]),n._v(" "),t("li",[n._v("java.util.List#addAll(Collection)")]),n._v(" "),t("li",[n._v("java.util.Set#addAll(Collection)")])])])}),[],!1,null,null,null);t.default=i.exports}}]);